var MitoApiSDKError=function(a,b){this.name="MitoApiSDKError",this.message=a,this.cause=b};MitoApiSDKError.prototype=new Error,MitoApiSDKError.prototype.constructor=MitoApiSDKError;var MitoApiSDK=function(){"use strict";var c,a="http://api.mito.hu",b=!1,d={phone:{bynumber:{params:["phonenumber"],path:"/api/{key}/phone/{phonenumber}"},withcountry:{params:["phonenumber","country"],path:"/api/{key}/phone/{country}/{phonenumber}"},search:{params:["search","firstname","lastname","city"],path:"/api/{key}/phone/search/{country}/{firstname}/{lastname}/{city}"}}},e=function(a,b,c){if(b<a.length&&a[b]in c)return c=c[a[b]],b++,e(a,b,c);if(b<a.length)throw console.log(this),new MitoApiSDKError("Unknown endpoint.",a);return c},f=function(a,b,c){var d=setInterval(function(){if(a&&4==a.readyState){window.clearInterval(d);var e=JSON.parse(a.responseText);if(200==a.status){if("error"in e&&c)return c.call(this,e),void 0;b&&b.call(this,e)}else 400==a.status&&c&&c.call(this,e)}},50)},g=function(){var a;try{a=new XMLHttpRequest,g=function(){return new XMLHttpRequest}}catch(b){for(var c=["MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],d=0,e=c.length;e>d;++d)try{a=new ActiveXObject(c[d]),g=function(){return new ActiveXObject(c[d])};break}catch(b){}}return a},h=function(b,d){var f=b.path,g=new RegExp("/{key}/g");if(g.test(f)&&!("key"in c))throw new MitoApiSDKError("Access token is missing.",c);var h;for(h in d)f=f.replace("{"+h+"}",encodeURIComponent(d[h]));return f=f.replace("{key}",c.key),a+f},i=function(a,b,c,d){var e=g();return e.open("GET",h(a,b),!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f(e,c,d),e.send(),e};return{init:function(a){if(b)throw new MitoApiSDKError("Only one instance is allowed.",this);b=!0,c=a||{}},api:function(){if(!b)throw new MitoApiSDKError("MitoSDK is not initialized.",this);var a=Array.prototype.slice.call(arguments,0);if(a.length<3)throw new MitoApiSDKError("Unsupported call.",a);if("function"!=typeof a[2])throw new MitoApiSDKError("Callback is not a function");if(a[3]&&"function"!=typeof a[3])throw new MitoApiSDKError("ErrorCallback is not a function");var g,c="/"==a[0].substring(0,1)?a[0].substring(1).split("/"):a[0].split("/"),f=e(c,0,d);for(g in f.params)if(!(f.params[g]in a[1]))throw new MitoApiSDKError("Missing parameter: "+f.params[g]+".",f.params);h(f,a[1]),i(f,a[1],a[2],a[3])},getRoutes:function(){return d}}}();